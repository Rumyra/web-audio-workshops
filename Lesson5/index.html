<!DOCTYPE html>
<html>
<head>
  <!--char set (lang above)-->
  <meta charset="utf-8">

  <!--device/browser shizzle-->
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="author" content="Ruth John (@rumyra)">
  <meta name="dcterms.rightsHolder" content="Ruth John for Rumyra Ltd, United Kingdom, 2015">
  <title>Lesson 5 | Web Audio Workshop</title>
  <link rel="stylesheet" href="/assets/style.css">

</head>
<body><div class="container">

  <section id="space">
    <span data-object="source"></span>
    <span data-object="listener"></span>
  </section>

</div>

<script type="text/javascript">

// declare stuff for use later on
const space = document.querySelector('#space'),
  spaceSource = document.querySelector('span[data-object="source"]'),
  spaceListener = document.querySelector('span[data-object="listener"]');


// audio stuff starts here

// create new context
const context = new window.AudioContext;

// audio stuff

// set sound source

// set sound listener

// set position of listener (z pos abituary)
// set intital position of sound

// instigate start pos x & y for later
var startPosX, startPosY;

fetch('/assets/100_C_G_Arps_SP_01.wav')
  // read into memory as array buffer
  .then(response => response.arrayBuffer())
  // turn into raw audio data
  .then(arrayBuffer => context.decodeAudioData(arrayBuffer))
  .then(audioBuffer => {
    // here si where we do stuff

    // create out sound source

    // pass in our buffer data

    // connect our graph
    music.connect(soundSource).connect(context.destination);

    // click & move person

    // on mouse down
    space.addEventListener("mousedown", function(evt) {

      // start music

      // set x & y pos
      startPosX = evt.clientX;
      startPosY = evt.clientY;

      // when mouse moves
      this.addEventListener("mousemove", function(evt) {

        // re-set sound source

        // move the position of the source

        // on mouse up
        this.addEventListener("mouseup", function(evt) {
          // stop the music
        })
      })
    })

  })


</script>

</body>
</html>